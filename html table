<!DOCTYPE html>
<html>
<head>
    <title>CSV Parser</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
</head>
<body>
    <input type="file" id="fileUpload" />
    <button onclick="parseCSV()">Upload</button>
    <br><br>
    <div id="tableContainer"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script>
        let tableData = [];

        function parseCSV() {
            let file = document.getElementById("fileUpload").files[0];
            let reader = new FileReader();

            reader.onload = function (e) {
                let contents = e.target.result;
                let rows = contents.split("\n");

                let table = "<table border='1' id='csvTable' class='display'>";
                table += "<thead><tr>";

                let headers = rows[0].split(",");
                for (let i = 0; i < headers.length; i++) {
                    table += "<th>" + headers[i] + "</th>";
                }

                table += "</tr></thead><tbody>";

                for (let i = 1; i < rows.length; i++) {
                    table += "<tr>";
                    let cells = rows[i].split(",");
                    let rowData = [];
                    for (let j = 0; j < cells.length; j++) {
                        table += "<td>" + cells[j] + "</td>";
                        rowData.push(cells[j]);
                    }
                    tableData.push(rowData);
                    table += "</tr>";
                }
                table += "</tbody></table>";
                document.getElementById("tableContainer").innerHTML = table;

                $(document).ready(function () {
                    $('#csvTable').DataTable();
                });
            };

            reader.readAsText(file);
        }
    </script>
</body>
</html>
