$plainText = "Hello, world!"
$passphrase = "MySecretPassphrase"
$encryptionKey = New-Object System.Security.Cryptography.RijndaelManaged
$encryptionKey.KeySize = 256
$encryptionKey.GenerateIV()
$encryptionKey.GenerateKey()
$encryptor = $encryptionKey.CreateEncryptor()
$memoryStream = New-Object System.IO.MemoryStream
$cryptoStream = New-Object System.Security.Cryptography.CryptoStream($memoryStream, $encryptor, [System.Security.Cryptography.CryptoStreamMode]::Write)
$streamWriter = New-Object System.IO.StreamWriter($cryptoStream)
$streamWriter.Write($plainText)
$streamWriter.Flush()
$cryptoStream.FlushFinalBlock()
$memoryStream.Flush()
$encryptedBytes = $memoryStream.ToArray()
$memoryStream.Close()
$cryptoStream.Close()
$encryptedText = [Convert]::ToBase64String($encryptedBytes)
Write-Output "Encrypted text: $encryptedText"

$decryptedBytes = [Convert]::FromBase64String($encryptedText)
$decryptor = $encryptionKey.CreateDecryptor()
$memoryStream = New-Object System.IO.MemoryStream($decryptedBytes)
$cryptoStream = New-Object System.Security.Cryptography.CryptoStream($memoryStream, $decryptor, [System.Security.Cryptography.CryptoStreamMode]::Read)
$streamReader = New-Object System.IO.StreamReader($cryptoStream)
$decryptedText = $streamReader.ReadToEnd()
$memoryStream.Close()
$cryptoStream.Close()
$decryptedText
